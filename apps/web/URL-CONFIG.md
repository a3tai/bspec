# URL Configuration

## Clean URLs

The BSpec website uses clean, SEO-friendly URLs without `.html` extensions.

### Examples

- ✅ Good: `https://bspec.dev/docs/types/VSN`
- ✅ Good: `https://bspec.dev/docs/document-types`
- ❌ Bad: `https://bspec.dev/docs/types/VSN.html`
- ❌ Bad: `https://bspec.dev/docs/document-types.html`

### How It Works

1. **VitePress Configuration** (`. vitepress/config.mts`)
   - `cleanUrls: true` - Enables clean URL generation
   - All links in nav and sidebar use clean URLs (no `.html`)

2. **Cloudflare Pages Redirects** (`public/_redirects`)
   - Maps clean URLs to `.html` files: `/docs/types/VSN` → `/docs/types/VSN.html`
   - Redirects `.html` URLs to clean URLs for SEO consistency
   - Uses HTTP 200 for internal rewrites, 301 for public redirects

3. **Generated Documentation**
   - All internal links use clean URLs
   - Generated by `scripts/generate_web_docs.py`
   - Example: `[VSN Document](/docs/types/VSN)` (no `.html`)

### URL Structure

```
/                           # Homepage
/docs/                      # Documentation root
/docs/overview              # Getting started
/docs/document-types        # All 112 document types
/docs/types/{CODE}          # Individual document type (e.g., /docs/types/VSN)
/docs/domains/{domain}      # Domain overview (e.g., /docs/domains/strategic-foundation)
/spec/v1-0-0               # Full specification
/about                      # About page
/community                  # Community page
```

### Redirect Rules

The `_redirects` file contains (order matters - first match wins):

```
# 1. Redirect .html URLs to clean URLs (301 redirect, visible to users)
# These MUST come first to prevent double .html extension
/docs/types/*.html      /docs/types/:splat      301
/docs/domains/*.html    /docs/domains/:splat    301
/docs/tools/*.html      /docs/tools/:splat      301
/docs/*.html            /docs/:splat            301
/spec/*.html            /spec/:splat            301
/about.html             /about                  301
/community.html         /community              301

# 2. Handle clean URLs by rewriting to .html files (200 internal rewrite)
/docs/types/*           /docs/types/:splat.html     200
/docs/domains/*         /docs/domains/:splat.html   200
/docs/tools/*           /docs/tools/:splat.html     200
/docs/*                 /docs/:splat.html           200
/spec/*                 /spec/:splat.html           200
/about                  /about.html                 200
/community              /community.html             200
```

### Testing

Test clean URLs locally with VitePress:

```bash
cd apps/web
bun run build
bun run preview
```

Visit http://localhost:4173/docs/types/VSN (no `.html`)

### Deployment

When deploying to Cloudflare Pages:

1. The `_redirects` file is automatically included in the build
2. Cloudflare Pages processes redirects before serving files
3. Clean URLs work automatically for all pages

### Benefits

1. **SEO-Friendly**: Clean URLs are preferred by search engines
2. **User-Friendly**: Easier to read, remember, and share
3. **Professional**: Modern web standard
4. **Future-Proof**: Easier to change technology without breaking links
5. **Consistent**: Same pattern across all pages

### Troubleshooting

If clean URLs don't work:

1. Check that `cleanUrls: true` is in `.vitepress/config.mts`
2. Verify `_redirects` file exists in `public/` directory
3. Ensure `_redirects` is included in the build output
4. Test locally with `bun run preview`
5. Check Cloudflare Pages dashboard for redirect rules

### Migration Notes

If you previously used `.html` extensions:

- Old URLs with `.html` are automatically redirected (301) to clean URLs
- No broken links - all variations work
- Search engines will update their indexes to clean URLs
- Update any external links to use clean URLs for best SEO
